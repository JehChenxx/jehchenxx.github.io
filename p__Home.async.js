"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[371],{74809:function(E,d,n){n.r(d),n.d(d,{default:function(){return $}});var S=n(90228),i=n.n(S),y=n(87999),h=n.n(y),F=n(48305),x=n.n(F),f=n(22396),l=n(75271),a=n(52676);function b(){var B=(0,l.useState)([]),v=x()(B,2),p=v[0],m=v[1];function g(){return c.apply(this,arguments)}function c(){return c=h()(i()().mark(function t(){var o,s;return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.from("todos").select();case 2:o=e.sent,s=o.data,s&&s.length>0&&m(function(){return s});case 5:case"end":return e.stop()}},t)})),c.apply(this,arguments)}return(0,l.useEffect)(function(){console.log("\u767B\u5F55\u6210\u529F\uFF0C\u73B0\u5728\u53EF\u4EE5\u83B7\u53D6 Todos \u4E86"),g()},[]),(0,a.jsx)("div",{children:p.map(function(t){return console.log(t),(0,a.jsx)("li",{children:JSON.stringify(t)},t)})})}var j=b,A=function(){var v=(0,l.useState)(null),p=x()(v,2),m=p[0],g=p[1];(0,l.useEffect)(function(){var t=function(e,u){var w;console.log("Auth Event:",e);var T=(w=u==null?void 0:u.user)!==null&&w!==void 0?w:null;g(T),(e==="SIGNED_OUT"||!u)&&window.location.hash.includes("access_token")&&window.history.replaceState(null,"",window.location.pathname)};f.Z.auth.getSession().then(function(r){var e=r.data.session;e&&g(e.user)});var o=f.Z.auth.onAuthStateChange(function(r,e){t(r,e)}),s=o.data;return function(){s.subscription.unsubscribe()}},[]);var c=function(){var t=h()(i()().mark(function o(){var s,r;return i()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,f.Z.auth.signOut();case 2:s=u.sent,r=s.error,r||(console.log("\u9000\u51FA\u6210\u529F\uFF0C\u6E05\u7406\u73B0\u573A..."),window.location.hash&&window.history.replaceState(null,"",window.location.pathname),window.location.href="/login");case 5:case"end":return u.stop()}},o)}));return function(){return t.apply(this,arguments)}}();return(0,a.jsx)("div",{style:{height:"calc(100vh - 140px)",padding:"20px"},children:(0,a.jsx)("div",{id:"user",style:{marginBottom:"20px",padding:"10px",borderBottom:"1px solid #ccc"},children:m?(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:["\u6B22\u8FCE\u56DE\u6765, ",(0,a.jsx)("strong",{children:m.email}),"!"]}),(0,a.jsx)(j,{}),(0,a.jsx)("button",{onClick:c,children:"\u9000\u51FA\u767B\u5F55"})]}):(0,a.jsx)("p",{children:"\u5F53\u524D\u672A\u767B\u5F55\uFF0C\u8BF7\u70B9\u51FB\u53F3\u4E0A\u89D2\u767B\u5F55\u6309\u94AE\u8FDB\u884C\u767B\u5F55\u3002"})})})},$=l.memo(A)},22396:function(E,d,n){var S=n(19697),i="https://swxiffcmfmoowokhglyi.supabase.co",y="sb_publishable_lyX4MrLNdYVw38b74f6vCg_av6rwMiH",h=(0,S.eI)(i,y);d.Z=h}}]);
