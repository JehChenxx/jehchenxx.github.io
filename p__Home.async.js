"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[371],{74809:function(E,v,a){a.r(v),a.d(v,{default:function(){return T}});var S=a(90228),o=a.n(S),x=a(87999),l=a.n(x),F=a(48305),B=a.n(F),c=a(22396),d=a(75271),r=a(52676);function j(){var b=(0,d.useState)([]),m=B()(b,2),g=m[0],w=m[1];function y(){return h.apply(this,arguments)}function h(){return h=l()(o()().mark(function u(){var t,e;return o()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,c.Z.from("todos").select();case 2:t=s.sent,e=t.data,e&&e.length>0&&w(function(){return e});case 5:case"end":return s.stop()}},u)})),h.apply(this,arguments)}function f(u,t){return i.apply(this,arguments)}function i(){return i=l()(o()().mark(function u(t,e){var n,s,$;return o()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,c.Z.auth.signInWithPassword({email:t,password:e});case 2:n=p.sent,s=n.data,$=n.error,s.user&&(console.log("\u767B\u5F55\u6210\u529F\uFF0C\u73B0\u5728\u53EF\u4EE5\u83B7\u53D6 Todos \u4E86"),y());case 6:case"end":return p.stop()}},u)})),i.apply(this,arguments)}return(0,d.useEffect)(function(){f("cxx2010@outlook.com","JehChen2026")},[]),(0,r.jsx)("div",{children:g.map(function(u){return console.log(u),(0,r.jsx)("li",{children:JSON.stringify(u)},u)})})}var A=j,C=function(){var m=(0,d.useState)(null),g=B()(m,2),w=g[0],y=g[1];(0,d.useEffect)(function(){var f=function(e,n){var s;console.log("Auth Event:",e);var $=(s=n==null?void 0:n.user)!==null&&s!==void 0?s:null;y($),(e==="SIGNED_OUT"||!n)&&window.location.hash.includes("access_token")&&window.history.replaceState(null,"",window.location.pathname)};c.Z.auth.getSession().then(function(t){var e=t.data.session;e&&y(e.user)});var i=c.Z.auth.onAuthStateChange(function(t,e){f(t,e)}),u=i.data;return function(){u.subscription.unsubscribe()}},[]);var h=function(){var f=l()(o()().mark(function i(){var u,t;return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.Z.auth.signOut();case 2:u=n.sent,t=u.error,t||(console.log("\u9000\u51FA\u6210\u529F\uFF0C\u6E05\u7406\u73B0\u573A..."),window.location.hash&&window.history.replaceState(null,"",window.location.pathname),window.location.href="/login");case 5:case"end":return n.stop()}},i)}));return function(){return f.apply(this,arguments)}}();return(0,r.jsx)("div",{style:{height:"calc(100vh - 140px)",padding:"20px"},children:(0,r.jsx)("div",{id:"user",style:{marginBottom:"20px",padding:"10px",borderBottom:"1px solid #ccc"},children:w?(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:["\u6B22\u8FCE\u56DE\u6765, ",(0,r.jsx)("strong",{children:w.email}),"!"]}),(0,r.jsx)(A,{}),(0,r.jsx)("button",{onClick:h,children:"\u9000\u51FA\u767B\u5F55"})]}):(0,r.jsx)("p",{children:"\u5F53\u524D\u672A\u767B\u5F55\uFF0C\u8BF7\u70B9\u51FB\u53F3\u4E0A\u89D2\u767B\u5F55\u6309\u94AE\u8FDB\u884C\u767B\u5F55\u3002"})})})},T=d.memo(C)},22396:function(E,v,a){var S=a(19697),o="https://swxiffcmfmoowokhglyi.supabase.co",x="sb_publishable_lyX4MrLNdYVw38b74f6vCg_av6rwMiH",l=(0,S.eI)(o,x);v.Z=l}}]);
