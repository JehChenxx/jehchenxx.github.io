"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[371],{74809:function(C,g,e){e.r(g),e.d(g,{default:function(){return E}});var B=e(90228),c=e.n(B),F=e(87999),S=e.n(F),w=e(48305),y=e.n(w),d=e(39403),i=e(75271),t=e(52676);function j(){var x=(0,i.useState)([]),h=y()(x,2),f=h[0],v=h[1];function p(){return l.apply(this,arguments)}function l(){return l=S()(c()().mark(function a(){var o,s;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.Z.from("todos").select();case 2:o=n.sent,s=o.data,s&&s.length>0&&v(function(){return s});case 5:case"end":return n.stop()}},a)})),l.apply(this,arguments)}return(0,i.useEffect)(function(){console.log("\u767B\u5F55\u6210\u529F\uFF0C\u73B0\u5728\u53EF\u4EE5\u83B7\u53D6 Todos \u4E86"),p()},[]),(0,t.jsx)("div",{children:f.map(function(a){return console.log(a),(0,t.jsx)("li",{children:JSON.stringify(a)},a)})})}var A=j,$=function(){var h=(0,i.useState)(null),f=y()(h,2),v=f[0],p=f[1];(0,i.useEffect)(function(){var a=function(n,u){var m;console.log("Auth Event:",n);var T=(m=u==null?void 0:u.user)!==null&&m!==void 0?m:null;p(T),(n==="SIGNED_OUT"||!u)&&window.location.hash.includes("access_token")&&window.history.replaceState(null,"",window.location.pathname)};d.Z.auth.getSession().then(function(r){var n=r.data.session;n&&p(n.user)});var o=d.Z.auth.onAuthStateChange(function(r,n){a(r,n)}),s=o.data;return function(){s.subscription.unsubscribe()}},[]);var l=function(){var a=S()(c()().mark(function o(){var s,r;return c()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,d.Z.auth.signOut();case 2:s=u.sent,r=s.error,r||(console.log("\u9000\u51FA\u6210\u529F\uFF0C\u6E05\u7406\u73B0\u573A..."),window.location.hash&&window.history.replaceState(null,"",window.location.pathname),window.location.href="/login");case 5:case"end":return u.stop()}},o)}));return function(){return a.apply(this,arguments)}}();return(0,t.jsx)("div",{style:{height:"calc(100vh - 140px)",padding:"20px"},children:(0,t.jsx)("div",{id:"user",style:{marginBottom:"20px",padding:"10px",borderBottom:"1px solid #ccc"},children:v?(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{children:["\u6B22\u8FCE\u56DE\u6765, ",(0,t.jsx)("strong",{children:v.email}),"!"]}),(0,t.jsx)(A,{}),(0,t.jsx)("button",{onClick:l,children:"\u9000\u51FA\u767B\u5F55"})]}):(0,t.jsx)("p",{children:"\u5F53\u524D\u672A\u767B\u5F55\uFF0C\u8BF7\u70B9\u51FB\u53F3\u4E0A\u89D2\u767B\u5F55\u6309\u94AE\u8FDB\u884C\u767B\u5F55\u3002"})})})},E=i.memo($)}}]);
